<!DOCTYPE html>
<html lang="en">

<head>
    <script src='https://d3js.org/d3.v7.min.js'></script>
</head>

<body>
</body>

<script>

    // importing the csv file
    let titaniccsv = 'https://raw.githubusercontent.com/dsindy/kaggle-titanic/master/data/test.csv';
    /*
    PassengerId,Pclass,Name,Sex,Age,SibSp,Parch,Ticket,Fare,Cabin,Embarked
    892,3,"Kelly, Mr. James",male,34.5,0,0,330911,7.8292,,Q
    893,3,"Wilkes, Mrs. James (Ellen Needs)",female,47,1,0,363272,7,,S
    894,2,"Myles, Mr. Thomas Francis",male,62,0,0,240276,9.6875,,Q
    895,3,"Wirz, Mr. Albert",male,27,0,0,315154,8.6625,,S
    */

    // reading the csv file
    d3.csv(titaniccsv).then(function(data) {

        // creating two new arrays to store the counts
        const titleArray = []
        const sexArray = []
        
        // reading each line of the csv file
        data.forEach(function(d) {

            // splitting the Name element, separated by a blank space
            var splitName = d.Name.split(" ")
            // adding the title of the passenger to an array which should be the element at index 1
            titleArray.push(splitName[1])
            // adding the sex of the passenger to an array
            sexArray.push(d.Sex)
        });

        // creating a function to count the number of unique values 
        // https://www.tutorialspoint.com/counting-unique-elements-in-an-array-in-javascript
        const countUnique = arr => {
            // creating an empty object
            const counts = {};
            for (var i = 0; i < arr.length; i++) {
                // the key of counts object is based off the array parameter provided and increment the count
                counts[arr[i]] = 1 + (counts[arr[i]] || 0);
            };
            return counts;
        };

        console.log(countUnique(titleArray));
        console.log(countUnique(sexArray))
    });
    

</script>

</html>